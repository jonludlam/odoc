<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head><title>markup (odoc.markup)</title>
  <link rel="stylesheet" href="odoc.css"/><meta charset="utf-8"/>
  <meta name="generator" content="odoc %%VERSION%%"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <script src="highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
 </head>
 <body class="odoc">
  <nav class="odoc-nav"><a href="index.html">Up</a> â€“ 
   <a href="index.html">odoc</a> &#x00BB; markup
  </nav>
  <header class="odoc-preamble">
   <h1 id="markup-differences-from-ocamldoc">
    <a href="#markup-differences-from-ocamldoc" class="anchor"></a>Markup
     differences from Ocamldoc
   </h1>
   <p>The canonical description of the markup that odoc understands is
     in 
    <a
     href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#s%3Aocamldoc-comments"
     >this section
    </a> of the OCaml reference manual. The eventual aim is to support
     the in-code markup in its entirety, although right now there are
     some gaps. There are also some extensions where odoc goes beyond
     what is officially supported.
   </p>
  </header>
  <nav class="odoc-toc">
   <ul>
    <li><a href="#changes">Changes</a>
     <ul><li><a href="#omissions">Omissions</a></li>
      <li><a href="#improvements">Improvements</a></li>
     </ul>
    </li><li><a href="#reference-syntax">Reference syntax</a></li>
   </ul>
  </nav>
  <div class="odoc-content">
   <h4 id="changes"><a href="#changes" class="anchor"></a>Changes</h4>
   <p>The following describes the changes between what odoc understands
     and what is in the OCaml manual.
   </p>
   <ul>
    <li>Heading levels are more restrictive. In the manual, it suggests
      any whole number is acceptable. In odoc we follow the HTML spec
      in allowing headings from 1-6, and we also allow heading level 
     <code>0</code> for the title of <code>mld</code> files. Odoc emits
      a warning for heading levels outside this range and caps them.
    </li>
   </ul>
   <h5 id="omissions"><a href="#omissions" class="anchor"></a>Omissions</h5>
   <ul>
    <li>Comments describing class inheritance are not rendered (
     <a href="https://github.com/ocaml/odoc/issues/574">github issue</a>
     ).
    </li>
    <li>Odoc handles ambiguous documentation comments as the compiler
      does (see 
     <a href="https://caml.inria.fr/pub/docs/manual-ocaml/doccomments.html">
      here
     </a>) rather than treating them as the ocamldoc manual suggests.
    </li>
    <li>Odoc does not ignore tags where they don't make sense (e.g. 
     <code>@param</code> tags on instance variables are rendered) (
     <a href="https://github.com/ocaml/odoc/issues/575">github issue</a>
     )
    </li>
    <li>
     <a
      href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#ss:ocamldoc-formatting"
      >Alignment elements
     </a> are not handled (<code>{C text}</code>, <code>{L text}</code>
      and <code>{R text}</code>) (
     <a href="https://github.com/ocaml/odoc/issues/541">github issue</a>
     )
    </li>
    <li>Odoc does not recognise 
     <a
      href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#sss:ocamldoc-html-tags"
      >html tags embedded in comments
     </a> (
     <a href="https://github.com/ocaml/odoc/issues/576">github issue</a>
     )
    </li>
    <li><code>{!indexlist}</code> is not supported (
     <a href="https://github.com/ocaml/odoc/issues/577">github issue</a>
     )
    </li>
    <li>The first paragraph is used for synopses instead of the 
     <a
      href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#sss:ocamldoc-preamble"
      >first sentence
     </a>. Synopses are used when rendering declarations (of modules,
      classes, etc..) and <code>{!modules:...}</code> lists. An other
      difference is that documentation starting with a heading or something
      that is not a paragraph won't have a synopsis (
     <a href="https://github.com/ocaml/odoc/pull/643">github issue</a>
     ).
    </li>
   </ul>
   <h5 id="improvements"><a href="#improvements" class="anchor"></a>
    Improvements
   </h5>
   <ul>
    <li>Odoc has a better mechanism for disambiguating references in 
     comments. See 'reference syntax' later in this document.
    </li>
    <li>Built-in support for standalone 'mld' files - these are documents
      using the OCamldoc markup, but rendered as distinct pages.
    </li>
    <li>Structured output - odoc can produce output in a structured directory
      tree rather a set of files.
    </li><li>A few extra tags are supported:</li>
   </ul>
   <ol><li><code>@returns</code> is a synonym for <code>@return</code></li>
    <li><code>@raises</code> is a synonym for <code>@raise</code></li>
    <li><code>@open</code> and <code>@closed</code> and <code>@inline</code>
      are hints for how 'included' signatures should be rendered
    </li>
    <li><code>@canonical</code> allows a definition of a <code>module</code>
     , <code>module type</code> or <code>type</code> to be marked as 
     canonically elsewhere.
    </li>
   </ol>
   <h4 id="reference-syntax"><a href="#reference-syntax" class="anchor"></a>
    Reference syntax
   </h4>
   <p>Odoc has a far more powerful reference resolution mechanism than
     ocamldoc. While it supports the mechanism in ocamldoc used for 
    disambiguating between different types of references, it offers a
     more powerful alternative. The new mechanism allows for disambiguation
     of each part in a dotted reference rather than just the final part.
     For example, where in the reference manual it suggests the syntax
     <code>{!type:Foo.Bar.t}</code> to designate a type, and 
    <code>{!val:Foo.Bar.t}</code> a value of the same name, the new Odoc
     syntax for these comments would be <code>{!Foo.Bar.type-t}</code>
     and <code>{!Foo.Bar.val-t}</code>. This allows odoc to disambiguate
     when there are other ambiguous elements within the path. For example,
     we can distinguish between a type or value t within a module or 
    module type with the same name: 
    <code>{!module-Foo.module-type-Bar.type-t}</code> or 
    <code>{!module-type-Foo.module-Bar.val-t}</code>.
   </p><p>Additionally we support extra annotations:</p>
   <ul>
    <li><code>module-type</code> is a replacement for <code>modtype</code>
    </li>
    <li><code>class-type</code> is a replacement for <code>classtype</code>
    </li><li><code>exn</code> is recognised as <code>exception</code></li>
    <li><code>extension</code> refers to a type extension</li>
    <li><code>field</code> is a replacement for <code>recfield</code></li>
    <li><code>instance-variable</code> refers to instance variables</li>
    <li><code>label</code> refers to labels introduced in anchors</li>
    <li><code>page</code> refers to <code>mld</code> pages as outlined above
    </li><li><code>value</code> is recognised as <code>val</code></li>
   </ul>
  </div>
 </body>
</html>